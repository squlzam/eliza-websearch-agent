{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import Redis from \"ioredis\";\nimport { IDatabaseCacheAdapter, UUID, elizaLogger } from \"@elizaos/core\";\n\nexport class RedisClient implements IDatabaseCacheAdapter {\n    private client: Redis;\n\n    constructor(redisUrl: string) {\n        this.client = new Redis(redisUrl);\n\n        this.client.on(\"connect\", () => {\n            elizaLogger.success(\"Connected to Redis\");\n        });\n\n        this.client.on(\"error\", (err) => {\n            elizaLogger.error(\"Redis error:\", err);\n        });\n    }\n\n    async getCache(params: {\n        agentId: UUID;\n        key: string;\n    }): Promise<string | undefined> {\n        try {\n            const redisKey = this.buildKey(params.agentId, params.key);\n            const value = await this.client.get(redisKey);\n            return value || undefined;\n        } catch (err) {\n            elizaLogger.error(\"Error getting cache:\", err);\n            return undefined;\n        }\n    }\n\n    async setCache(params: {\n        agentId: UUID;\n        key: string;\n        value: string;\n    }): Promise<boolean> {\n        try {\n            const redisKey = this.buildKey(params.agentId, params.key);\n            await this.client.set(redisKey, params.value);\n            return true;\n        } catch (err) {\n            elizaLogger.error(\"Error setting cache:\", err);\n            return false;\n        }\n    }\n\n    async deleteCache(params: {\n        agentId: UUID;\n        key: string;\n    }): Promise<boolean> {\n        try {\n            const redisKey = this.buildKey(params.agentId, params.key);\n            const result = await this.client.del(redisKey);\n            return result > 0;\n        } catch (err) {\n            elizaLogger.error(\"Error deleting cache:\", err);\n            return false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        try {\n            await this.client.quit();\n            elizaLogger.success(\"Disconnected from Redis\");\n        } catch (err) {\n            elizaLogger.error(\"Error disconnecting from Redis:\", err);\n        }\n    }\n\n    private buildKey(agentId: UUID, key: string): string {\n        return `${agentId}:${key}`; // Constructs a unique key based on agentId and key\n    }\n}\n\nexport default RedisClient;\n"],"mappings":";AAAA,OAAO,WAAW;AAClB,SAAsC,mBAAmB;AAElD,IAAM,cAAN,MAAmD;AAAA,EAC9C;AAAA,EAER,YAAY,UAAkB;AAC1B,SAAK,SAAS,IAAI,MAAM,QAAQ;AAEhC,SAAK,OAAO,GAAG,WAAW,MAAM;AAC5B,kBAAY,QAAQ,oBAAoB;AAAA,IAC5C,CAAC;AAED,SAAK,OAAO,GAAG,SAAS,CAAC,QAAQ;AAC7B,kBAAY,MAAM,gBAAgB,GAAG;AAAA,IACzC,CAAC;AAAA,EACL;AAAA,EAEA,MAAM,SAAS,QAGiB;AAC5B,QAAI;AACA,YAAM,WAAW,KAAK,SAAS,OAAO,SAAS,OAAO,GAAG;AACzD,YAAM,QAAQ,MAAM,KAAK,OAAO,IAAI,QAAQ;AAC5C,aAAO,SAAS;AAAA,IACpB,SAAS,KAAK;AACV,kBAAY,MAAM,wBAAwB,GAAG;AAC7C,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAM,SAAS,QAIM;AACjB,QAAI;AACA,YAAM,WAAW,KAAK,SAAS,OAAO,SAAS,OAAO,GAAG;AACzD,YAAM,KAAK,OAAO,IAAI,UAAU,OAAO,KAAK;AAC5C,aAAO;AAAA,IACX,SAAS,KAAK;AACV,kBAAY,MAAM,wBAAwB,GAAG;AAC7C,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAM,YAAY,QAGG;AACjB,QAAI;AACA,YAAM,WAAW,KAAK,SAAS,OAAO,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,MAAM,KAAK,OAAO,IAAI,QAAQ;AAC7C,aAAO,SAAS;AAAA,IACpB,SAAS,KAAK;AACV,kBAAY,MAAM,yBAAyB,GAAG;AAC9C,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAM,aAA4B;AAC9B,QAAI;AACA,YAAM,KAAK,OAAO,KAAK;AACvB,kBAAY,QAAQ,yBAAyB;AAAA,IACjD,SAAS,KAAK;AACV,kBAAY,MAAM,mCAAmC,GAAG;AAAA,IAC5D;AAAA,EACJ;AAAA,EAEQ,SAAS,SAAe,KAAqB;AACjD,WAAO,GAAG,OAAO,IAAI,GAAG;AAAA,EAC5B;AACJ;AAEA,IAAO,gBAAQ;","names":[]}